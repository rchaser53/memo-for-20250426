# VOICEVOX テキスト読み上げツール

このツールは、入力したテキストをVOICEVOXエンジンを使用して音声に変換し、再生するNode.jsスクリプトです。

標準版と拡張版の2つのバージョンがあります：
- **標準版**: シンプルな使い方で、デフォルトの話者（四国めたん）を使用
- **拡張版**: 話者の選択や出力ファイル名のカスタマイズが可能

## 前提条件

- [Node.js](https://nodejs.org/) (v12以上)
- [VOICEVOX](https://voicevox.hiroshiba.jp/)がインストールされ、起動していること

## インストール方法

1. このリポジトリをクローンまたはダウンロードします
2. 依存パッケージをインストールします：

```bash
cd voicevox-reader
npm install
```

## 使い方

### 標準版

#### 対話モード

1. VOICEVOXエンジンを起動します（VOICEVOXアプリケーションを開くと自動的に起動します）
2. 以下のいずれかの方法でスクリプトを実行します：

```bash
# シェルスクリプトを使用（推奨）
./run.sh

# または直接Node.jsで実行
node index.js
```

3. プロンプトが表示されたら、読み上げたいテキストを入力します
4. 「exit」と入力すると、プログラムを終了します

#### テキストファイルの読み上げ

テキストファイルの内容を直接読み上げることもできます：

```bash
# シェルスクリプトを使用（推奨）
./run.sh path/to/textfile.txt

# または直接Node.jsで実行
node index.js path/to/textfile.txt
```

### 拡張版

拡張版では、話者の選択や出力ファイル名のカスタマイズが可能です。

#### 対話モード

```bash
# シェルスクリプトを使用（推奨）
./run-advanced.sh

# または直接Node.jsで実行
node advanced.js
```

#### テキストファイルの読み上げ

```bash
# シェルスクリプトを使用（推奨）
./run-advanced.sh path/to/textfile.txt

# または直接Node.jsで実行
node advanced.js path/to/textfile.txt
```

拡張版の機能：
- 利用可能な話者から選択可能
- 出力ファイル名のカスタマイズ
- タイムスタンプ付きの自動ファイル名生成
- テキストファイルの読み上げ

## 設定ファイル

このツールは`config.json`という設定ファイルを使用して、様々な設定をカスタマイズできます。初回実行時に自動的に作成されます。

### 設定ファイルの例

```json
{
  "api": {
    "url": "http://localhost:50021",
    "timeout": 10000
  },
  "speaker": {
    "default_id": 0,
    "name": "四国めたん（ノーマル）"
  },
  "output": {
    "dir": "output",
    "filename": "output.wav"
  },
  "playback": {
    "auto_play": true
  }
}
```

### 設定項目

- **api**: VOICEVOXエンジンのAPI設定
  - `url`: VOICEVOXエンジンのURLとポート
  - `timeout`: API呼び出しのタイムアウト時間（ミリ秒）
- **speaker**: 話者の設定
  - `default_id`: デフォルトの話者ID
  - `name`: デフォルトの話者名（参照用）
- **output**: 出力設定
  - `dir`: 音声ファイルの保存先ディレクトリ
  - `filename`: デフォルトの音声ファイル名
- **playback**: 再生設定
  - `auto_play`: 音声を自動再生するかどうか（true/false）

### 設定ファイルの編集方法

1. `config.json`をテキストエディタで開きます
2. 必要な設定を変更します
3. ファイルを保存します
4. スクリプトを再実行すると、新しい設定が適用されます

## 注意事項

- デフォルトでは「四国めたん（ノーマル）」の声が使用されます
- デフォルトの話者を変更するには、`config.json`の`speaker.default_id`の値を変更してください
- 音声ファイルは`output`ディレクトリに保存されます

## トラブルシューティング

- 「VOICEVOXエンジンに接続できませんでした」というエラーが表示される場合：
  - VOICEVOXアプリケーションが起動しているか確認してください
  - デフォルトでVOICEVOXエンジンはポート50021で動作します。このポートが他のアプリケーションで使用されていないか確認してください

## 利用可能な話者ID

VOICEVOXには複数の話者が用意されています。以下は一部の話者IDの例です：

- 0: 四国めたん（ノーマル）
- 1: 四国めたん（あまあま）
- 2: 四国めたん（ツンツン）
- 3: 四国めたん（セクシー）
- 4: ずんだもん（ノーマル）
- 5: ずんだもん（あまあま）
- 6: ずんだもん（ツンツン）
- 7: ずんだもん（セクシー）
- 8: 春日部つむぎ（ノーマル）

他の話者IDについては、VOICEVOXの公式ドキュメントを参照してください。
